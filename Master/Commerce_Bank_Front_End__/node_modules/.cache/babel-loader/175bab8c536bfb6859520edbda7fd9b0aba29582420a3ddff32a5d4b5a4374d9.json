{"ast":null,"code":"import { LoginResponse, User } from \"../entity\";\nimport { client } from \"./client\";\nimport axios from 'axios';\nfunction checkLoggedIn() {\n  let token = localStorage.getItem(\"token\");\n  if (!token) {\n    return false;\n  }\n  try {\n    let payload = token.split(\".\")[1];\n    payload = JSON.parse(atob(payload));\n    return payload[\"exp\"] && payload[\"exp\"] > Date.now() / 1000;\n  } catch (e) {\n    return false;\n  }\n}\nfunction setToken(token) {\n  localStorage.setItem(\"token\", token);\n}\nfunction getToken() {\n  return localStorage.getItem(\"token\");\n}\nfunction logout() {\n  localStorage.removeItem(\"token\");\n}\nconst API_URL = \"http://localhost:8080/\";\nconst login = (username, password) => {\n  return axios.post(API_URL + \"token\", {\n    username,\n    password\n  }).then(response => {\n    if (response.data.username) {\n      localStorage.setItem(\"user\", JSON.stringify(response.data));\n    }\n    if (response.status == 200) {\n      throw new Error(\"Invalid Credentials!\");\n    }\n    return response.data;\n  });\n};\n\n/*\nfunction login(username, password) {\n    let params = {\n        username,\n        password\n    };\n\n\n    const data = Object.entries(params)\n        .map(([key, val]) => `${key}=${encodeURIComponent(val)}`)\n        .join('&');\n\n    return new Promise((resolve, reject) => {\n        client.post('token', data, {\n            headers: {\n                'content-type': 'application/x-www-form-urlencoded'\n            }\n        }).then(response => {\n            resolve(new LoginResponse(response.data));\n        }).catch(reason => {\n            reject(\"Authentication failed\");\n        })\n    });\n    \n}\n\n*/\n\nconst authService = {\n  login,\n  logout,\n  setToken,\n  getToken,\n  checkLoggedIn\n};\nexport { login, logout, setToken, getToken, checkLoggedIn };\nexport default authService;","map":{"version":3,"names":["LoginResponse","User","client","axios","checkLoggedIn","token","localStorage","getItem","payload","split","JSON","parse","atob","Date","now","e","setToken","setItem","getToken","logout","removeItem","API_URL","login","username","password","post","then","response","data","stringify","status","Error","authService"],"sources":["/Users/camdengear/commerce_bank_front_end__/src/services/auth.service.js"],"sourcesContent":["import { LoginResponse, User } from \"../entity\";\nimport { client } from \"./client\";\nimport axios from 'axios';\n\nfunction checkLoggedIn() {\n    let token = localStorage.getItem(\"token\");\n    if (!token) {\n        return false;\n    }\n\n    try {\n        let payload = token.split(\".\")[1];\n        payload = JSON.parse(atob(payload));\n        return payload[\"exp\"] && payload[\"exp\"] > Date.now() / 1000;\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction setToken(token) {\n    localStorage.setItem(\"token\", token);\n}\n\nfunction getToken() {\n    return localStorage.getItem(\"token\");\n}\n\nfunction logout() {\n    localStorage.removeItem(\"token\");\n}\n\n\n\n\n\n\n\nconst API_URL = \"http://localhost:8080/\";\n\n\n\nconst login = (username, password) => {\n    return axios\n      .post(API_URL + \"token\", {\n        username,\n        password,\n      })\n      .then((response) => {\n        if (response.data.username) {\n          localStorage.setItem(\"user\", JSON.stringify(response.data));\n\n          \n        }\n\n        if(response.status == 200){\n            throw new Error(\"Invalid Credentials!\");\n        }\n  \n        return response.data;\n      });\n\n      \n\n      \n  };\n\n\n\n/*\nfunction login(username, password) {\n    let params = {\n        username,\n        password\n    };\n\n\n    const data = Object.entries(params)\n        .map(([key, val]) => `${key}=${encodeURIComponent(val)}`)\n        .join('&');\n\n    return new Promise((resolve, reject) => {\n        client.post('token', data, {\n            headers: {\n                'content-type': 'application/x-www-form-urlencoded'\n            }\n        }).then(response => {\n            resolve(new LoginResponse(response.data));\n        }).catch(reason => {\n            reject(\"Authentication failed\");\n        })\n    });\n    \n}\n\n*/\n\nconst authService = {\n    login,\n    logout,\n    setToken,\n    getToken,\n    checkLoggedIn\n};\n\nexport {\n    login,\n    logout,\n    setToken,\n    getToken,\n    checkLoggedIn\n}\n\nexport default authService;"],"mappings":"AAAA,SAASA,aAAa,EAAEC,IAAI,QAAQ,WAAW;AAC/C,SAASC,MAAM,QAAQ,UAAU;AACjC,OAAOC,KAAK,MAAM,OAAO;AAEzB,SAASC,aAAaA,CAAA,EAAG;EACrB,IAAIC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EACzC,IAAI,CAACF,KAAK,EAAE;IACR,OAAO,KAAK;EAChB;EAEA,IAAI;IACA,IAAIG,OAAO,GAAGH,KAAK,CAACI,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IACjCD,OAAO,GAAGE,IAAI,CAACC,KAAK,CAACC,IAAI,CAACJ,OAAO,CAAC,CAAC;IACnC,OAAOA,OAAO,CAAC,KAAK,CAAC,IAAIA,OAAO,CAAC,KAAK,CAAC,GAAGK,IAAI,CAACC,GAAG,EAAE,GAAG,IAAI;EAC/D,CAAC,CAAC,OAAOC,CAAC,EAAE;IACR,OAAO,KAAK;EAChB;AACJ;AAEA,SAASC,QAAQA,CAACX,KAAK,EAAE;EACrBC,YAAY,CAACW,OAAO,CAAC,OAAO,EAAEZ,KAAK,CAAC;AACxC;AAEA,SAASa,QAAQA,CAAA,EAAG;EAChB,OAAOZ,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;AACxC;AAEA,SAASY,MAAMA,CAAA,EAAG;EACdb,YAAY,CAACc,UAAU,CAAC,OAAO,CAAC;AACpC;AAQA,MAAMC,OAAO,GAAG,wBAAwB;AAIxC,MAAMC,KAAK,GAAGA,CAACC,QAAQ,EAAEC,QAAQ,KAAK;EAClC,OAAOrB,KAAK,CACTsB,IAAI,CAACJ,OAAO,GAAG,OAAO,EAAE;IACvBE,QAAQ;IACRC;EACF,CAAC,CAAC,CACDE,IAAI,CAAEC,QAAQ,IAAK;IAClB,IAAIA,QAAQ,CAACC,IAAI,CAACL,QAAQ,EAAE;MAC1BjB,YAAY,CAACW,OAAO,CAAC,MAAM,EAAEP,IAAI,CAACmB,SAAS,CAACF,QAAQ,CAACC,IAAI,CAAC,CAAC;IAG7D;IAEA,IAAGD,QAAQ,CAACG,MAAM,IAAI,GAAG,EAAC;MACtB,MAAM,IAAIC,KAAK,CAAC,sBAAsB,CAAC;IAC3C;IAEA,OAAOJ,QAAQ,CAACC,IAAI;EACtB,CAAC,CAAC;AAKN,CAAC;;AAIH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMI,WAAW,GAAG;EAChBV,KAAK;EACLH,MAAM;EACNH,QAAQ;EACRE,QAAQ;EACRd;AACJ,CAAC;AAED,SACIkB,KAAK,EACLH,MAAM,EACNH,QAAQ,EACRE,QAAQ,EACRd,aAAa;AAGjB,eAAe4B,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}