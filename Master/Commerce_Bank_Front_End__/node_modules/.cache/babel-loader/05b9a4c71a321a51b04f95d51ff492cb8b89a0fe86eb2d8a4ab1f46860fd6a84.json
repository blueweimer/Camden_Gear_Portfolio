{"ast":null,"code":"import { LoginResponse, User } from \"../entity\";\nimport { client } from \"./client\";\nimport axios from 'axios';\nfunction checkLoggedIn() {\n  let token = localStorage.getItem(\"token\");\n  if (!token) {\n    return false;\n  }\n  try {\n    let payload = token.split(\".\")[1];\n    payload = JSON.parse(atob(payload));\n    return payload[\"exp\"] && payload[\"exp\"] > Date.now() / 1000;\n  } catch (e) {\n    return false;\n  }\n}\nfunction setToken(token) {\n  localStorage.setItem(\"token\", token);\n}\nfunction getToken() {\n  return localStorage.getItem(\"token\");\n}\nfunction logout() {\n  localStorage.removeItem(\"token\");\n}\nfunction login(username, password) {\n  let params = {\n    username,\n    password\n  };\n  const data = Object.entries(params).map(_ref => {\n    let [key, val] = _ref;\n    return `${key}=${encodeURIComponent(val)}`;\n  }).join('&');\n  return new Promise((resolve, reject) => {\n    client.post('token', data, {\n      headers: {\n        'content-type': 'application/x-www-form-urlencoded'\n      }\n    }).then(response => {\n      resolve(new LoginResponse(response.data));\n    }).catch(reason => {\n      reject(\"Authentication failed\");\n    });\n  });\n}\nconst authService = {\n  login,\n  logout,\n  setToken,\n  getToken,\n  checkLoggedIn\n};\nexport { login, logout, setToken, getToken, checkLoggedIn };\nexport default authService;","map":{"version":3,"names":["LoginResponse","User","client","axios","checkLoggedIn","token","localStorage","getItem","payload","split","JSON","parse","atob","Date","now","e","setToken","setItem","getToken","logout","removeItem","login","username","password","params","data","Object","entries","map","_ref","key","val","encodeURIComponent","join","Promise","resolve","reject","post","headers","then","response","catch","reason","authService"],"sources":["/Users/camdengear/commerce_bank_front_end__/src/services/auth.service.js"],"sourcesContent":["import { LoginResponse, User } from \"../entity\";\nimport { client } from \"./client\";\nimport axios from 'axios';\n\nfunction checkLoggedIn() {\n    let token = localStorage.getItem(\"token\");\n    if (!token) {\n        return false;\n    }\n\n    try {\n        let payload = token.split(\".\")[1];\n        payload = JSON.parse(atob(payload));\n        return payload[\"exp\"] && payload[\"exp\"] > Date.now() / 1000;\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction setToken(token) {\n    localStorage.setItem(\"token\", token);\n}\n\nfunction getToken() {\n    return localStorage.getItem(\"token\");\n}\n\nfunction logout() {\n    localStorage.removeItem(\"token\");\n}\n\n\n\n\nfunction login(username, password) {\n    let params = {\n        username,\n        password\n    };\n\n\n    const data = Object.entries(params)\n        .map(([key, val]) => `${key}=${encodeURIComponent(val)}`)\n        .join('&');\n\n    return new Promise((resolve, reject) => {\n        client.post('token', data, {\n            headers: {\n                'content-type': 'application/x-www-form-urlencoded'\n            }\n        }).then(response => {\n            resolve(new LoginResponse(response.data));\n        }).catch(reason => {\n            reject(\"Authentication failed\");\n        })\n    });\n    \n}\n\nconst authService = {\n    login,\n    logout,\n    setToken,\n    getToken,\n    checkLoggedIn\n};\n\nexport {\n    login,\n    logout,\n    setToken,\n    getToken,\n    checkLoggedIn\n}\n\nexport default authService;"],"mappings":"AAAA,SAASA,aAAa,EAAEC,IAAI,QAAQ,WAAW;AAC/C,SAASC,MAAM,QAAQ,UAAU;AACjC,OAAOC,KAAK,MAAM,OAAO;AAEzB,SAASC,aAAaA,CAAA,EAAG;EACrB,IAAIC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EACzC,IAAI,CAACF,KAAK,EAAE;IACR,OAAO,KAAK;EAChB;EAEA,IAAI;IACA,IAAIG,OAAO,GAAGH,KAAK,CAACI,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IACjCD,OAAO,GAAGE,IAAI,CAACC,KAAK,CAACC,IAAI,CAACJ,OAAO,CAAC,CAAC;IACnC,OAAOA,OAAO,CAAC,KAAK,CAAC,IAAIA,OAAO,CAAC,KAAK,CAAC,GAAGK,IAAI,CAACC,GAAG,EAAE,GAAG,IAAI;EAC/D,CAAC,CAAC,OAAOC,CAAC,EAAE;IACR,OAAO,KAAK;EAChB;AACJ;AAEA,SAASC,QAAQA,CAACX,KAAK,EAAE;EACrBC,YAAY,CAACW,OAAO,CAAC,OAAO,EAAEZ,KAAK,CAAC;AACxC;AAEA,SAASa,QAAQA,CAAA,EAAG;EAChB,OAAOZ,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;AACxC;AAEA,SAASY,MAAMA,CAAA,EAAG;EACdb,YAAY,CAACc,UAAU,CAAC,OAAO,CAAC;AACpC;AAKA,SAASC,KAAKA,CAACC,QAAQ,EAAEC,QAAQ,EAAE;EAC/B,IAAIC,MAAM,GAAG;IACTF,QAAQ;IACRC;EACJ,CAAC;EAGD,MAAME,IAAI,GAAGC,MAAM,CAACC,OAAO,CAACH,MAAM,CAAC,CAC9BI,GAAG,CAACC,IAAA;IAAA,IAAC,CAACC,GAAG,EAAEC,GAAG,CAAC,GAAAF,IAAA;IAAA,OAAM,GAAEC,GAAI,IAAGE,kBAAkB,CAACD,GAAG,CAAE,EAAC;EAAA,EAAC,CACxDE,IAAI,CAAC,GAAG,CAAC;EAEd,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACpClC,MAAM,CAACmC,IAAI,CAAC,OAAO,EAAEZ,IAAI,EAAE;MACvBa,OAAO,EAAE;QACL,cAAc,EAAE;MACpB;IACJ,CAAC,CAAC,CAACC,IAAI,CAACC,QAAQ,IAAI;MAChBL,OAAO,CAAC,IAAInC,aAAa,CAACwC,QAAQ,CAACf,IAAI,CAAC,CAAC;IAC7C,CAAC,CAAC,CAACgB,KAAK,CAACC,MAAM,IAAI;MACfN,MAAM,CAAC,uBAAuB,CAAC;IACnC,CAAC,CAAC;EACN,CAAC,CAAC;AAEN;AAEA,MAAMO,WAAW,GAAG;EAChBtB,KAAK;EACLF,MAAM;EACNH,QAAQ;EACRE,QAAQ;EACRd;AACJ,CAAC;AAED,SACIiB,KAAK,EACLF,MAAM,EACNH,QAAQ,EACRE,QAAQ,EACRd,aAAa;AAGjB,eAAeuC,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}